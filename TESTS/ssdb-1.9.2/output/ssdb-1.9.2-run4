==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d040000f780 by thread T2 (mutexes: write M91):
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (ssdb-server+0x0000004451b6)
    #1 <null> <null> (libc.so.6+0x0000000b1f48)
    #2 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #3 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #4 ExpirationHandler::load_expiration_keys_from_db(int) <null> (ssdb-server+0x000000512b6f)
    #5 ExpirationHandler::expire_loop() <null> (ssdb-server+0x000000512c47)
    #6 ExpirationHandler::thread_func(void*) <null> (ssdb-server+0x000000512126)

  Previous write of size 8 at 0x7d040000f780 by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (ssdb-server+0x0000004404ef)
    #1 __strdup <null> (libc.so.6+0x000000088729)
    #2 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #3 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9416)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Mutex M91 (0x7d2c0000af50) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511caf)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T2 (tid=23023, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/lib/x86_64-linux-gnu/libc.so.6+0xb1f48) 
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7f46e82bade0 by thread T2 (mutexes: write M91):
    #0 localtime /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:793 (ssdb-server+0x000000435b00)
    #1 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #2 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #3 ExpirationHandler::load_expiration_keys_from_db(int) <null> (ssdb-server+0x000000512b6f)
    #4 ExpirationHandler::expire_loop() <null> (ssdb-server+0x000000512c47)
    #5 ExpirationHandler::thread_func(void*) <null> (ssdb-server+0x000000512126)

  Previous write of size 8 at 0x7f46e82bade0 by main thread:
    #0 localtime /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:793 (ssdb-server+0x000000435b00)
    #1 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #2 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9416)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Location is global '??' at 0x7f46e7ef7000 (libc.so.6+0x0000003c3de0)

  Mutex M91 (0x7d2c0000af50) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511caf)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T2 (tid=23023, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x514ba5) in Logger::logv(int, char const*, __va_list_tag*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7f46e82bade8 by thread T2 (mutexes: write M91):
    #0 localtime /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:793 (ssdb-server+0x000000435b00)
    #1 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #2 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #3 ExpirationHandler::load_expiration_keys_from_db(int) <null> (ssdb-server+0x000000512b6f)
    #4 ExpirationHandler::expire_loop() <null> (ssdb-server+0x000000512c47)
    #5 ExpirationHandler::thread_func(void*) <null> (ssdb-server+0x000000512126)

  Previous write of size 8 at 0x7f46e82bade8 by thread T3:
    #0 localtime /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:793 (ssdb-server+0x000000435b00)
    #1 Logger::logv(int, char const*, __va_list_tag*) <null> (ssdb-server+0x000000514ba5)
    #2 log_write(int, char const*, ...) <null> (ssdb-server+0x000000514a87)
    #3 ProcWorker::init() <null> (ssdb-server+0x0000005368ab)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c23f)

  Location is global '??' at 0x7f46e7ef7000 (libc.so.6+0x0000003c3de8)

  Mutex M91 (0x7d2c0000af50) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511caf)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T2 (tid=23023, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x514ba5) in Logger::logv(int, char const*, __va_list_tag*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d180000ef50 by thread T3 (mutexes: write M49):
    #0 BinlogQueue::commit() <null> (ssdb-server+0x00000050e2be)
    #1 SSDBImpl::set(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x0000004fb68f)
    #2 proc_set(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004aa8d2)
    #3 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Previous read of size 8 at 0x7d180000ef50 by thread T1:
    #0 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d733)

  Location is heap block of size 96 at 0x7d180000ef40 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f37ca)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x50e2be) in BinlogQueue::commit()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d800024b8b0 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d800024b8b0 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::hsize(Bytes const&) <null> (ssdb-server+0x0000004ff3c9)
    #7 incr_hsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x0000004fe50a)
    #8 SSDBImpl::hset(Bytes const&, Bytes const&, Bytes const&, char) <null> (ssdb-server+0x0000004fdd59)
    #9 proc_hset(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004b5983)
    #10 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #11 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d800024b000 allocated by thread T1:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::Allocate(unsigned long) <null> (ssdb-server+0x00000056c86f)
    #4 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bde2)
    #5 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #6 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #7 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #8 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #9 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #10 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d800052a728 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d800052a728 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::hsize(Bytes const&) <null> (ssdb-server+0x0000004ff3c9)
    #7 incr_hsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x0000004fe50a)
    #8 SSDBImpl::hdel(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x0000004fe759)
    #9 proc_hdel(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004b5f64)
    #10 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #11 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d800052a000 allocated by thread T3:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::Allocate(unsigned long) <null> (ssdb-server+0x00000056c86f)
    #4 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bde2)
    #5 leveldb::(anonymous namespace)::MemTableInserter::Put(leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x000000587fc4)
    #6 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x000000587803)
    #7 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #8 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #9 BinlogQueue::commit() <null> (ssdb-server+0x00000050e275)
    #10 SSDBImpl::hset(Bytes const&, Bytes const&, Bytes const&, char) <null> (ssdb-server+0x0000004fddc0)
    #11 proc_hset(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004b5983)
    #12 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #13 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d80008f7360 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d80008f7360 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::zsize(Bytes const&) <null> (ssdb-server+0x0000005028a9)
    #7 incr_zsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x00000050185a)
    #8 SSDBImpl::zset(Bytes const&, Bytes const&, Bytes const&, char) <null> (ssdb-server+0x000000500f3f)
    #9 proc_zset(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004bac46)
    #10 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #11 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d80008f7000 allocated by thread T1:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::Allocate(unsigned long) <null> (ssdb-server+0x00000056c86f)
    #4 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bde2)
    #5 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #6 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #7 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #8 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #9 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #10 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d8000816838 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d8000816838 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::zsize(Bytes const&) <null> (ssdb-server+0x0000005028a9)
    #7 incr_zsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x00000050185a)
    #8 SSDBImpl::zdel(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x000000501aaf)
    #9 proc_zdel(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004bb4c7)
    #10 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #11 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d8000816000 allocated by thread T3:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::AllocateAligned(unsigned long) <null> (ssdb-server+0x000000591072)
    #4 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::NewNode(char const* const&, int) <null> (ssdb-server+0x00000056dbbc)
    #5 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056c9e6)
    #6 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #7 leveldb::(anonymous namespace)::MemTableInserter::Put(leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x000000587fc4)
    #8 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x000000587803)
    #9 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #10 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #11 BinlogQueue::commit() <null> (ssdb-server+0x00000050e275)
    #12 SSDBImpl::hdel(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x0000004fe7b4)
    #13 proc_hdel(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004b5f64)
    #14 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #15 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d8000d22dd0 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d8000d22dd0 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::qsize(Bytes const&) <null> (ssdb-server+0x000000508203)
    #7 incr_qsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x000000509df6)
    #8 SSDBImpl::_qpush(Bytes const&, Bytes const&, unsigned long, char) <null> (ssdb-server+0x000000509b62)
    #9 SSDBImpl::qpush_back(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x00000050a12d)
    #10 proc_qpush_func(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*, int) <null> (ssdb-server+0x0000004c17da)
    #11 proc_qpush(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004c1a72)
    #12 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #13 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d8000d22000 allocated by thread T1:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::Allocate(unsigned long) <null> (ssdb-server+0x00000056c86f)
    #4 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bde2)
    #5 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #6 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #7 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #8 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #9 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #10 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d8000f91658 by thread T1:
    #0 leveldb::port::AtomicPointer::Release_Store(void*) <null> (ssdb-server+0x000000553d6c)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::SetNext(int, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node*) <null> (ssdb-server+0x00000056dc85)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Insert(char const* const&) <null> (ssdb-server+0x00000056ca66)
    #3 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bf34)
    #4 leveldb::(anonymous namespace)::MemTableInserter::Delete(leveldb::Slice const&) <null> (ssdb-server+0x00000058808e)
    #5 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x00000058788c)
    #6 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #7 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #8 BinlogQueue::del_range(unsigned long, unsigned long) <null> (ssdb-server+0x00000050f0e8)
    #9 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d886)

  Previous read of size 8 at 0x7d8000f91658 by thread T3 (mutexes: write M49):
    #0 leveldb::port::AtomicPointer::Acquire_Load() const <null> (ssdb-server+0x000000555202)
    #1 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node::Next(int) <null> (ssdb-server+0x00000056d5e2)
    #2 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual(char const* const&, leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Node**) const <null> (ssdb-server+0x00000056ddc4)
    #3 leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek(char const* const&) <null> (ssdb-server+0x00000056cc00)
    #4 leveldb::MemTable::Get(leveldb::LookupKey const&, std::string*, leveldb::Status*) <null> (ssdb-server+0x00000056c018)
    #5 leveldb::DBImpl::Get(leveldb::ReadOptions const&, leveldb::Slice const&, std::string*) <null> (ssdb-server+0x00000055043e)
    #6 SSDBImpl::qsize(Bytes const&) <null> (ssdb-server+0x000000508203)
    #7 incr_qsize(SSDBImpl*, Bytes const&, long) <null> (ssdb-server+0x000000509df6)
    #8 SSDBImpl::_qpop(Bytes const&, std::string*, unsigned long, char) <null> (ssdb-server+0x00000050a4c6)
    #9 SSDBImpl::qpop_front(Bytes const&, std::string*, char) <null> (ssdb-server+0x00000050a90d)
    #10 proc_qpop_func(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*, int) <null> (ssdb-server+0x0000004c1e3a)
    #11 proc_qpop(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004c2332)
    #12 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #13 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Location is heap block of size 4096 at 0x7d8000f91000 allocated by thread T3:
    #0 operator new[](unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:51 (ssdb-server+0x0000004a6563)
    #1 leveldb::Arena::AllocateNewBlock(unsigned long) <null> (ssdb-server+0x000000590ebf)
    #2 leveldb::Arena::AllocateFallback(unsigned long) <null> (ssdb-server+0x000000590dcf)
    #3 leveldb::Arena::Allocate(unsigned long) <null> (ssdb-server+0x00000056c86f)
    #4 leveldb::MemTable::Add(unsigned long, leveldb::ValueType, leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x00000056bde2)
    #5 leveldb::(anonymous namespace)::MemTableInserter::Put(leveldb::Slice const&, leveldb::Slice const&) <null> (ssdb-server+0x000000587fc4)
    #6 leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const <null> (ssdb-server+0x000000587803)
    #7 leveldb::WriteBatchInternal::InsertInto(leveldb::WriteBatch const*, leveldb::MemTable*) <null> (ssdb-server+0x000000587c62)
    #8 leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::WriteBatch*) <null> (ssdb-server+0x000000551252)
    #9 BinlogQueue::commit() <null> (ssdb-server+0x00000050e275)
    #10 SSDBImpl::_qpush(Bytes const&, Bytes const&, unsigned long, char) <null> (ssdb-server+0x000000509bc8)
    #11 SSDBImpl::qpush_back(Bytes const&, Bytes const&, char) <null> (ssdb-server+0x00000050a12d)
    #12 proc_qpush_func(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*, int) <null> (ssdb-server+0x0000004c17da)
    #13 proc_qpush(NetworkServer*, Link*, std::vector<Bytes, std::allocator<Bytes> > const&, Response*) <null> (ssdb-server+0x0000004c1a72)
    #14 ProcWorker::proc(ProcJob*) <null> (ssdb-server+0x000000536a41)
    #15 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c319)

  Mutex M49 (0x7d180000ef78) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050cb0a)
    #3 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x553d6c) in leveldb::port::AtomicPointer::Release_Store(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bd08 by main thread:
    #0 pthread_cond_destroy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1157 (ssdb-server+0x00000044a5cc)
    #1 Queue<ProcJob>::~Queue() <null> (ssdb-server+0x00000052980c)
    #2 WorkerPool<ProcWorker, ProcJob>::~WorkerPool() <null> (ssdb-server+0x0000005266be)
    #3 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521d6a)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bd08 by thread T3 (mutexes: write M93):
    #0 pthread_cond_wait /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1100 (ssdb-server+0x00000044a791)
    #1 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c59d)
    #2 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Location is heap block of size 344 at 0x7d480000bd00 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 NetworkServer::serve() <null> (ssdb-server+0x000000522e3b)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Mutex M93 (0x7d480000bd38) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Queue<ProcJob>::Queue() <null> (ssdb-server+0x00000052a417)
    #2 WorkerPool<ProcWorker, ProcJob>::WorkerPool(char const*) <null> (ssdb-server+0x000000526b33)
    #3 NetworkServer::serve() <null> (ssdb-server+0x000000522e5e)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T3 (tid=23024, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x52980c) in Queue<ProcJob>::~Queue()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bd38 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521d7b)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous atomic read of size 1 at 0x7d480000bd38 by thread T3:
    #0 pthread_cond_wait /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1100 (ssdb-server+0x00000044a791)
    #1 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c59d)
    #2 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Thread T3 (tid=23024, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bd70 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521d7b)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bd70 by thread T3 (mutexes: write M13226334608211256):
    #0 bool std::operator==<ProcJob, ProcJob&, ProcJob*>(std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&, std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&) <null> (ssdb-server+0x00000052c8f9)
    #1 std::deque<ProcJob, std::allocator<ProcJob> >::empty() const <null> (ssdb-server+0x00000052c87e)
    #2 std::queue<ProcJob, std::deque<ProcJob, std::allocator<ProcJob> > >::empty() const <null> (ssdb-server+0x00000052c7a8)
    #3 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c57c)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Mutex M13226334608211256 is already destroyed.

  Thread T3 (tid=23024, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bd90 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521d7b)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bd90 by thread T3 (mutexes: write M13226334608211256):
    #0 bool std::operator==<ProcJob, ProcJob&, ProcJob*>(std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&, std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&) <null> (ssdb-server+0x00000052c8de)
    #1 std::deque<ProcJob, std::allocator<ProcJob> >::empty() const <null> (ssdb-server+0x00000052c87e)
    #2 std::queue<ProcJob, std::deque<ProcJob, std::allocator<ProcJob> > >::empty() const <null> (ssdb-server+0x00000052c7a8)
    #3 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c57c)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Mutex M13226334608211256 is already destroyed.

  Thread T3 (tid=23024, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bb88 by main thread:
    #0 pthread_cond_destroy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1157 (ssdb-server+0x00000044a5cc)
    #1 Queue<ProcJob>::~Queue() <null> (ssdb-server+0x00000052980c)
    #2 WorkerPool<ProcWorker, ProcJob>::~WorkerPool() <null> (ssdb-server+0x0000005266be)
    #3 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521dcf)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bb88 by thread T5 (mutexes: write M95):
    #0 pthread_cond_wait /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1100 (ssdb-server+0x00000044a791)
    #1 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c59d)
    #2 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Location is heap block of size 344 at 0x7d480000bb80 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 NetworkServer::serve() <null> (ssdb-server+0x000000522ee1)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Mutex M95 (0x7d480000bbb8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Queue<ProcJob>::Queue() <null> (ssdb-server+0x00000052a417)
    #2 WorkerPool<ProcWorker, ProcJob>::WorkerPool(char const*) <null> (ssdb-server+0x000000526b33)
    #3 NetworkServer::serve() <null> (ssdb-server+0x000000522f02)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T5 (tid=23027, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522f73)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x52980c) in Queue<ProcJob>::~Queue()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bbb8 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521de0)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous atomic read of size 1 at 0x7d480000bbb8 by thread T11:
    #0 pthread_mutex_lock /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:3319 (ssdb-server+0x000000431c43)
    #1 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c552)
    #2 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Thread T11 (tid=23033, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522f73)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bbf0 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521de0)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bbf0 by thread T5 (mutexes: write M13507809584921528):
    #0 bool std::operator==<ProcJob, ProcJob&, ProcJob*>(std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&, std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&) <null> (ssdb-server+0x00000052c8f9)
    #1 std::deque<ProcJob, std::allocator<ProcJob> >::empty() const <null> (ssdb-server+0x00000052c87e)
    #2 std::queue<ProcJob, std::deque<ProcJob, std::allocator<ProcJob> > >::empty() const <null> (ssdb-server+0x00000052c7a8)
    #3 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c57c)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Mutex M13507809584921528 is already destroyed.

  Thread T5 (tid=23027, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522f73)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d480000bc10 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521de0)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d480000bc10 by thread T5 (mutexes: write M13507809584921528):
    #0 bool std::operator==<ProcJob, ProcJob&, ProcJob*>(std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&, std::_Deque_iterator<ProcJob, ProcJob&, ProcJob*> const&) <null> (ssdb-server+0x00000052c8de)
    #1 std::deque<ProcJob, std::allocator<ProcJob> >::empty() const <null> (ssdb-server+0x00000052c87e)
    #2 std::queue<ProcJob, std::deque<ProcJob, std::allocator<ProcJob> > >::empty() const <null> (ssdb-server+0x00000052c7a8)
    #3 Queue<ProcJob>::pop(ProcJob*) <null> (ssdb-server+0x00000052c57c)
    #4 WorkerPool<ProcWorker, ProcJob>::_run_worker(void*) <null> (ssdb-server+0x00000052c276)

  Mutex M13507809584921528 is already destroyed.

  Thread T5 (tid=23027, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522f73)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: heap-use-after-free (pid=23020)
  Read of size 1 at 0x7d080000d118 by main thread:
    #0 BytesHash::operator()(Bytes const&) const <null> (ssdb-server+0x0000004e8098)
    #1 __gnu_cxx::hashtable<std::pair<Bytes const, Command*>, Bytes, BytesHash, std::_Select1st<std::pair<Bytes const, Command*> >, BytesEqual, std::allocator<Command*> >::_M_bkt_num_key(Bytes const&, unsigned long) const <null> (ssdb-server+0x0000004e7fe8)
    #2 __gnu_cxx::hashtable<std::pair<Bytes const, Command*>, Bytes, BytesHash, std::_Select1st<std::pair<Bytes const, Command*> >, BytesEqual, std::allocator<Command*> >::_M_bkt_num_key(Bytes const&) const <null> (ssdb-server+0x0000004e7f6a)
    #3 __gnu_cxx::hashtable<std::pair<Bytes const, Command*>, Bytes, BytesHash, std::_Select1st<std::pair<Bytes const, Command*> >, BytesEqual, std::allocator<Command*> >::_M_bkt_num(std::pair<Bytes const, Command*> const&) const <null> (ssdb-server+0x0000004e7ef2)
    #4 __gnu_cxx::_Hashtable_iterator<std::pair<Bytes const, Command*>, Bytes, BytesHash, std::_Select1st<std::pair<Bytes const, Command*> >, BytesEqual, std::allocator<Command*> >::operator++() <null> (ssdb-server+0x0000004e7db5)
    #5 __gnu_cxx::_Hashtable_iterator<std::pair<Bytes const, Command*>, Bytes, BytesHash, std::_Select1st<std::pair<Bytes const, Command*> >, BytesEqual, std::allocator<Command*> >::operator++(int) <null> (ssdb-server+0x0000004e5234)
    #6 ProcMap::~ProcMap() <null> (ssdb-server+0x000000531f89)
    #7 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521e05)
    #8 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #9 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #10 main <null> (ssdb-server+0x0000004a9682)

  Previous write of size 8 at 0x7d080000d118 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() <null> (libstdc++.so.6+0x0000000ba36e)
    #2 ProcMap::~ProcMap() <null> (ssdb-server+0x000000531f65)
    #3 NetworkServer::~NetworkServer() <null> (ssdb-server+0x000000521e05)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9456)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: heap-use-after-free (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x4e8098) in BytesHash::operator()(Bytes const&) const
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 1 at 0x7d2c0000af80 by main thread (mutexes: write M91):
    #0 ExpirationHandler::stop() <null> (ssdb-server+0x000000512016)
    #1 ExpirationHandler::~ExpirationHandler() <null> (ssdb-server+0x000000511ece)
    #2 SSDBServer::~SSDBServer() <null> (ssdb-server+0x0000004e3b93)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a948e)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 1 at 0x7d2c0000af80 by thread T2:
    #0 ExpirationHandler::thread_func(void*) <null> (ssdb-server+0x0000005120be)

  Location is heap block of size 168 at 0x7d2c0000af50 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c05)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Mutex M91 (0x7d2c0000af50) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (ssdb-server+0x000000434975)
    #1 Mutex::Mutex() <null> (ssdb-server+0x0000004ca57c)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511caf)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T2 (tid=23023, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x512016) in ExpirationHandler::stop()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d2c0000af90 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 SSDBServer::~SSDBServer() <null> (ssdb-server+0x0000004e3ba7)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a948e)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d2c0000af90 by thread T2:
    #0 ExpirationHandler::thread_func(void*) <null> (ssdb-server+0x0000005120ed)

  As if synchronized via sleep:
    #0 usleep /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:364 (ssdb-server+0x000000446e32)
    #1 ExpirationHandler::stop() <null> (ssdb-server+0x00000051205e)
    #2 ExpirationHandler::~ExpirationHandler() <null> (ssdb-server+0x000000511ece)
    #3 SSDBServer::~SSDBServer() <null> (ssdb-server+0x0000004e3b93)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a948e)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T2 (tid=23023, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 1 at 0x7d180000ef70 by main thread:
    #0 BinlogQueue::~BinlogQueue() <null> (ssdb-server+0x00000050da94)
    #1 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f3112)
    #2 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f330c)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a950e)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 1 at 0x7d180000ef70 by thread T1:
    #0 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d6d1)

  As if synchronized via sleep:
    #0 usleep /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:364 (ssdb-server+0x000000446e32)
    #1 ExpirationHandler::stop() <null> (ssdb-server+0x00000051205e)
    #2 ExpirationHandler::~ExpirationHandler() <null> (ssdb-server+0x000000511ece)
    #3 SSDBServer::~SSDBServer() <null> (ssdb-server+0x0000004e3b93)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a948e)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Location is heap block of size 96 at 0x7d180000ef40 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f37ca)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x50da94) in BinlogQueue::~BinlogQueue()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d180000ef40 by main thread:
    #0 BinlogQueue::~BinlogQueue() <null> (ssdb-server+0x00000050db29)
    #1 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f3112)
    #2 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f330c)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a950e)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d180000ef40 by thread T1:
    #0 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d6fc)

  As if synchronized via sleep:
    #0 usleep /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:364 (ssdb-server+0x000000446e32)
    #1 BinlogQueue::~BinlogQueue() <null> (ssdb-server+0x00000050dae2)
    #2 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f3112)
    #3 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f330c)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a950e)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Location is heap block of size 96 at 0x7d180000ef40 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (ssdb-server+0x0000004a64c3)
    #1 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f37ca)
    #2 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #3 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #4 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x50db29) in BinlogQueue::~BinlogQueue()
==================
==================
WARNING: ThreadSanitizer: data race (pid=23020)
  Write of size 8 at 0x7d180000ef48 by main thread:
    #0 operator delete(void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 (ssdb-server+0x0000004a6759)
    #1 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f3123)
    #2 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f330c)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a950e)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

  Previous read of size 8 at 0x7d180000ef48 by thread T1:
    #0 BinlogQueue::log_clean_thread_func(void*) <null> (ssdb-server+0x00000050d756)

  As if synchronized via sleep:
    #0 usleep /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:364 (ssdb-server+0x000000446e32)
    #1 BinlogQueue::~BinlogQueue() <null> (ssdb-server+0x00000050dae2)
    #2 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f3112)
    #3 SSDBImpl::~SSDBImpl() <null> (ssdb-server+0x0000004f330c)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a950e)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

  Thread T1 (tid=23022, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: data race /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:77 in operator delete(void*)
==================
==================
WARNING: ThreadSanitizer: thread leak (pid=23020)
  Thread T1 (tid=23022, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 BinlogQueue::BinlogQueue(leveldb::DB*, bool) <null> (ssdb-server+0x00000050ce51)
    #2 SSDB::open(Options const&, std::string const&) <null> (ssdb-server+0x0000004f3850)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a9017)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: thread leak (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x50ce51) in BinlogQueue::BinlogQueue(leveldb::DB*, bool)
==================
==================
WARNING: ThreadSanitizer: thread leak (pid=23020)
  Thread T2 (tid=23023, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 ExpirationHandler::start() <null> (ssdb-server+0x000000511e38)
    #2 ExpirationHandler::ExpirationHandler(SSDB*) <null> (ssdb-server+0x000000511d59)
    #3 SSDBServer::SSDBServer(SSDB*, SSDB*, Config const&, NetworkServer*) <null> (ssdb-server+0x0000004e2c49)
    #4 MyApplication::run() <null> (ssdb-server+0x0000004a9366)
    #5 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #6 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: thread leak (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x511e38) in ExpirationHandler::start()
==================
==================
WARNING: ThreadSanitizer: thread leak (pid=23020)
  Thread T3 (tid=23024, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522ecf)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: thread leak (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x526d73) in WorkerPool<ProcWorker, ProcJob>::start(int)
==================
==================
WARNING: ThreadSanitizer: thread leak (pid=23020)
  Thread T7 (tid=23029, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (ssdb-server+0x000000449783)
    #1 WorkerPool<ProcWorker, ProcJob>::start(int) <null> (ssdb-server+0x000000526d73)
    #2 NetworkServer::serve() <null> (ssdb-server+0x000000522f73)
    #3 MyApplication::run() <null> (ssdb-server+0x0000004a942d)
    #4 Application::main(int, char**) <null> (ssdb-server+0x00000051ee37)
    #5 main <null> (ssdb-server+0x0000004a9682)

SUMMARY: ThreadSanitizer: thread leak (/home/jason/github/ConAnalysis/concurrency-exploits/ssdb-1.9.2/ssdb-master-tsan/ssdb-server+0x526d73) in WorkerPool<ProcWorker, ProcJob>::start(int)
==================
ThreadSanitizer: reported 28 warnings
